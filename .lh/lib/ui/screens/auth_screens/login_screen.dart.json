{
    "sourceFile": "lib/ui/screens/auth_screens/login_screen.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1706921392151,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1706921449575,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,8 +8,9 @@\n import 'package:task_manager_flutter/ui/screens/auth_screens/email_verification_screeen.dart';\r\n import 'package:task_manager_flutter/ui/screens/bottom_navbar_screen.dart';\r\n import 'package:task_manager_flutter/ui/widgets/custom_password_text_field.dart';\r\n import 'package:task_manager_flutter/ui/widgets/custom_text_form_field.dart';\r\n+import 'package:task_manager_flutter/ui/widgets/signup_button.dart';\r\n \r\n class LoginScreen extends StatefulWidget {\r\n   const LoginScreen({super.key});\r\n \r\n"
                },
                {
                    "date": 1706921468759,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,8 +9,9 @@\n import 'package:task_manager_flutter/ui/screens/bottom_navbar_screen.dart';\r\n import 'package:task_manager_flutter/ui/widgets/custom_password_text_field.dart';\r\n import 'package:task_manager_flutter/ui/widgets/custom_text_form_field.dart';\r\n import 'package:task_manager_flutter/ui/widgets/signup_button.dart';\r\n+import 'package:task_manager_flutter/ui/screens/auth_screens/signup_form_screen.dart';\r\n \r\n class LoginScreen extends StatefulWidget {\r\n   const LoginScreen({super.key});\r\n \r\n"
                },
                {
                    "date": 1706921572745,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -165,9 +165,14 @@\n                               backgroundColor: const Color(0xFFFA903A),\r\n                               minimumSize: const Size.fromHeight(50), // NEW\r\n                             ),\r\n                             onPressed: () {\r\n-                              login();\r\n+                              Navigator.push(\r\n+                                  context,\r\n+                                  MaterialPageRoute(\r\n+                                      builder: (context) =>\r\n+                                          const SignUpFormScreen()),\r\n+                                );\r\n                             },\r\n                             child: const Text(\r\n                               'Criar Conta',\r\n                               style:\r\n"
                },
                {
                    "date": 1706921634844,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -199,22 +199,8 @@\n                                     fontSize: 20),\r\n                               ),\r\n                             ),\r\n                           ),\r\n-                          Visibility(\r\n-                            child: SignUpButton(\r\n-                              text: \"Don't have An Account?\",\r\n-                              onPresse: () {\r\n-                                Navigator.push(\r\n-                                  context,\r\n-                                  MaterialPageRoute(\r\n-                                      builder: (context) =>\r\n-                                          const SignUpFormScreen()),\r\n-                                );\r\n-                              },\r\n-                              buttonText: 'Sign Up',\r\n-                            ),\r\n-                          ),\r\n                         ],\r\n                       ),\r\n                     ),\r\n                   ],\r\n"
                },
                {
                    "date": 1728398375291,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,16 +9,32 @@\n import 'package:task_manager_flutter/ui/screens/bottom_navbar_screen.dart';\r\n import 'package:task_manager_flutter/ui/widgets/custom_password_text_field.dart';\r\n import 'package:task_manager_flutter/ui/widgets/custom_text_form_field.dart';\r\n import 'package:task_manager_flutter/ui/screens/auth_screens/signup_form_screen.dart';\r\n+import 'dart:convert'; // Para converter JSON\r\n \r\n class LoginScreen extends StatefulWidget {\r\n   const LoginScreen({super.key});\r\n \r\n   @override\r\n   State<LoginScreen> createState() => _LoginScreenState();\r\n }\r\n \r\n+class News {\r\n+  final String title;\r\n+  final String summary;\r\n+\r\n+  News({required this.title, required this.summary});\r\n+\r\n+  // Função para criar uma notícia a partir do JSON\r\n+  factory News.fromJson(Map<String, dynamic> json) {\r\n+    return News(\r\n+      title: json['title'],\r\n+      summary: json['summary'],\r\n+    );\r\n+  }\r\n+}\r\n+\r\n class _LoginScreenState extends State<LoginScreen>\r\n     with SingleTickerProviderStateMixin {\r\n   final _emailController = TextEditingController();\r\n   final _passwordController = TextEditingController();\r\n@@ -27,8 +43,47 @@\n   final GlobalKey<ScaffoldState> _scaffoldKey = GlobalKey<ScaffoldState>();\r\n \r\n   bool _loginInProgress = false;\r\n \r\n+  List<News> newsList = []; // Lista de notícias\r\n+  bool isLoading = false; // Flag de carregamento\r\n+  int page = 1; // Controle de paginação\r\n+\r\n+  Future<void> fetchNews() async {\r\n+    setState(() {\r\n+      isLoading = true;\r\n+    });\r\n+\r\n+    final NetworkResponse response =\r\n+        await NetworkCaller().postRequest('https://api.exemplo.com/news?page=$page', '');\r\n+    _loginInProgress = false;\r\n+    if (mounted) {\r\n+      setState(() {});\r\n+    }\r\n+\r\n+    if (response.isSuccess) {\r\n+      LoginModel model = LoginModel.fromJson(response.body!);\r\n+      await AuthUtility.setUserInfo(model);\r\n+      setState(() {\r\n+        newsList.addAll(newsJson.map((json) => News.fromJson(json)).toList());\r\n+        page++; // Incrementar página para buscar a próxima\r\n+        isLoading = false;\r\n+      });\r\n+      if (mounted) {\r\n+        Navigator.pushAndRemoveUntil(\r\n+            context,\r\n+            MaterialPageRoute(builder: (context) => const BottomNavBarScreen()),\r\n+            (route) => false);\r\n+      }\r\n+    } else {\r\n+      if (mounted) {\r\n+        _passwordController.clear();\r\n+        ScaffoldMessenger.of(context).showSnackBar(\r\n+            const SnackBar(content: Text('Incorrect email or password')));\r\n+      }\r\n+    }\r\n+  }\r\n+\r\n   Future<void> login() async {\r\n     _loginInProgress = true;\r\n     if (mounted) {\r\n       setState(() {});\r\n"
                }
            ],
            "date": 1706921392151,
            "name": "Commit-0",
            "content": "import 'package:flutter/material.dart';\r\nimport 'package:task_manager_flutter/ui/widgets/home_screen.dart';\r\nimport 'package:task_manager_flutter/data/models/auth_utility.dart';\r\nimport 'package:task_manager_flutter/data/models/login_model.dart';\r\nimport 'package:task_manager_flutter/data/models/network_response.dart';\r\nimport 'package:task_manager_flutter/data/services/network_caller.dart';\r\nimport 'package:task_manager_flutter/data/utils/api_links.dart';\r\nimport 'package:task_manager_flutter/ui/screens/auth_screens/email_verification_screeen.dart';\r\nimport 'package:task_manager_flutter/ui/screens/bottom_navbar_screen.dart';\r\nimport 'package:task_manager_flutter/ui/widgets/custom_password_text_field.dart';\r\nimport 'package:task_manager_flutter/ui/widgets/custom_text_form_field.dart';\r\n\r\nclass LoginScreen extends StatefulWidget {\r\n  const LoginScreen({super.key});\r\n\r\n  @override\r\n  State<LoginScreen> createState() => _LoginScreenState();\r\n}\r\n\r\nclass _LoginScreenState extends State<LoginScreen>\r\n    with SingleTickerProviderStateMixin {\r\n  final _emailController = TextEditingController();\r\n  final _passwordController = TextEditingController();\r\n  final GlobalKey<FormState> _formKey = GlobalKey<FormState>();\r\n\r\n  final GlobalKey<ScaffoldState> _scaffoldKey = GlobalKey<ScaffoldState>();\r\n\r\n  bool _loginInProgress = false;\r\n\r\n  Future<void> login() async {\r\n    _loginInProgress = true;\r\n    if (mounted) {\r\n      setState(() {});\r\n    }\r\n    Map<String, dynamic> requestBody = {\r\n      \"email\": _emailController.text.trim(),\r\n      \"password\": _passwordController.text\r\n    };\r\n    final NetworkResponse response =\r\n        await NetworkCaller().postRequest(ApiLinks.login, requestBody);\r\n    _loginInProgress = false;\r\n    if (mounted) {\r\n      setState(() {});\r\n    }\r\n    if (response.isSuccess) {\r\n      LoginModel model = LoginModel.fromJson(response.body!);\r\n      await AuthUtility.setUserInfo(model);\r\n      if (mounted) {\r\n        Navigator.pushAndRemoveUntil(\r\n            context,\r\n            MaterialPageRoute(builder: (context) => const BottomNavBarScreen()),\r\n            (route) => false);\r\n      }\r\n    } else {\r\n      if (mounted) {\r\n        _passwordController.clear();\r\n        ScaffoldMessenger.of(context).showSnackBar(\r\n            const SnackBar(content: Text('Incorrect email or password')));\r\n      }\r\n    }\r\n  }\r\n\r\n  late AnimationController _animationController;\r\n\r\n  @override\r\n  void initState() {\r\n    _animationController =\r\n        AnimationController(vsync: this, duration: const Duration(seconds: 2))\r\n          ..addStatusListener((status) {\r\n            if (status == AnimationStatus.completed) {\r\n              Navigator.of(context).pushReplacement(\r\n                MaterialPageRoute(builder: (context) => const HomeScreen()),\r\n              );\r\n            }\r\n          });\r\n    super.initState();\r\n  }\r\n\r\n  @override\r\n  void dispose() {\r\n    _animationController.dispose();\r\n    super.dispose();\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      backgroundColor: const Color(0xFF340A9C),\r\n      body: Container(\r\n        child: ListView(\r\n          padding: EdgeInsets.zero,\r\n          children: [\r\n            Stack(\r\n              alignment: Alignment.bottomCenter,\r\n              children: [\r\n                Column(\r\n                  children: [\r\n                    Padding(\r\n                      padding: const EdgeInsets.only(\r\n                        top: 70,\r\n                        bottom: 32,\r\n                      ),\r\n                      child: Image.asset(\r\n                        \"assets/images/logoforafitn1.png\",\r\n                        height: 260,\r\n                        fit: BoxFit.contain,\r\n                      ),\r\n                    ),\r\n                    Padding(\r\n                      padding: const EdgeInsets.all(40.0),\r\n                      child: Column(\r\n                        crossAxisAlignment: CrossAxisAlignment.start,\r\n                        children: [\r\n                          const SizedBox(height: 16),\r\n                          Form(\r\n                            key: _formKey,\r\n                            child: CustomTextFormField(\r\n                                hintText: \"Email\",\r\n                                controller: _emailController,\r\n                                textInputType: TextInputType.emailAddress,\r\n                                validator: (value) {\r\n                                  if (value!.isEmpty) {\r\n                                    return \"Please enter email\";\r\n                                  }\r\n                                  return null;\r\n                                }),\r\n                          ),\r\n                          const SizedBox(height: 12),\r\n                          CustomPasswordTextFormField(\r\n                            hintText: \"Password\",\r\n                            controller: _passwordController,\r\n                            obscureText: true,\r\n                            validator: (value) {\r\n                              if (value!.isEmpty) {\r\n                                return \"Please enter password\";\r\n                              }\r\n                              return null;\r\n                            },\r\n                            textInputType: TextInputType.visiblePassword,\r\n                          ),\r\n                          const SizedBox(\r\n                            height: 16,\r\n                          ),\r\n                          ElevatedButton(\r\n                            style: ElevatedButton.styleFrom(\r\n                              backgroundColor: const Color(0xFFFA903A),\r\n                              minimumSize: const Size.fromHeight(50), // NEW\r\n                            ),\r\n                            onPressed: () {\r\n                              login();\r\n                            },\r\n                            child: const Text(\r\n                              'Acessar',\r\n                              style:\r\n                                  TextStyle(fontSize: 24, color: Colors.white),\r\n                            ),\r\n                          ),\r\n                          const SizedBox(\r\n                            height: 10,\r\n                          ),\r\n                          ElevatedButton(\r\n                            style: ElevatedButton.styleFrom(\r\n                              backgroundColor: const Color(0xFFFA903A),\r\n                              minimumSize: const Size.fromHeight(50), // NEW\r\n                            ),\r\n                            onPressed: () {\r\n                              login();\r\n                            },\r\n                            child: const Text(\r\n                              'Criar Conta',\r\n                              style:\r\n                                  TextStyle(fontSize: 24, color: Colors.white),\r\n                            ),\r\n                          ),\r\n                          const SizedBox(\r\n                            height: 40,\r\n                          ),\r\n                          Center(\r\n                            child: TextButton(\r\n                              onPressed: () {\r\n                                Navigator.push(\r\n                                    context,\r\n                                    MaterialPageRoute(\r\n                                        builder: (context) =>\r\n                                            const EmailVarificationScreeen()));\r\n                              },\r\n                              child: const Text(\r\n                                \"Esqueceu a Senha?\",\r\n                                style: TextStyle(\r\n                                    color: Color(0xFFFA903A),\r\n                                    letterSpacing: .7,\r\n                                    fontSize: 20),\r\n                              ),\r\n                            ),\r\n                          ),\r\n                          Visibility(\r\n                            child: SignUpButton(\r\n                              text: \"Don't have An Account?\",\r\n                              onPresse: () {\r\n                                Navigator.push(\r\n                                  context,\r\n                                  MaterialPageRoute(\r\n                                      builder: (context) => const SignUpFormScreen()),\r\n                                );\r\n                              },\r\n                              buttonText: 'Sign Up',\r\n                            ),\r\n                ),\r\n                        ],\r\n                      ),\r\n                    ),\r\n                  ],\r\n                ),\r\n              ],\r\n            )\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n"
        }
    ]
}